#include <stdio.h>

@print("foo")

@function sum_t(type, base)
    @local base = base or 0
    int sum_$type$($type$ *xs, size_t len) {
        $type$ sum = $base$;
        for(size_t i = 0; i < len; i++) {
            sum += xs[i];
        }
        return sum;
    }
@end

@sum_t("int")

int main() {
    int x = sum_int({strlen("foo"), strlen("bar")});
    printf("%i\n", x)
    return 0;
}
    